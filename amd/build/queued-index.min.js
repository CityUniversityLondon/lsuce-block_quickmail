define(["jquery","core/modal_factory","core/modal_events","core/str"],function(a,b,c,d){return{init:function(){window.onbeforeunload=null;var e=a("#select_course_filter").val();a("#select_course_filter").change(function(a){a.preventDefault(),e!==this.value&&(window.location.href="queued.php?courseid="+this.value)}),a(document).click(function(b){if(a(b.target).hasClass("btn-unqueue-message")){a(b.target).attr("data-queued-id")}if(a(b.target).hasClass("btn-send-now")){a(b.target).attr("data-message-id")}});var f=a(".btn-unqueue-message");b.create({type:b.types.CONFIRM,title:d.get_string("unqueue_scheduled_modal_title","block_quickmail"),body:d.get_string("unqueue_scheduled_confirm_message","block_quickmail")},f).done(function(b){b.getRoot().on(c.yes,function(b){b.preventDefault(),a('input[name="unqueue_message_id"]').val(unqueueMessageId),a("#mform-manage-queued").submit()})});var g=a(".btn-send-now");b.create({type:b.types.CONFIRM,title:d.get_string("send_now_scheduled_modal_title","block_quickmail"),body:d.get_string("send_now_scheduled_confirm_message","block_quickmail")},g).done(function(b){b.getRoot().on(c.yes,function(b){b.preventDefault(),a('input[name="send_now_message_id"]').val(sendNowMessageId),a("#mform-manage-queued").submit()})})}}});