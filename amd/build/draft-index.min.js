define(["jquery","core/modal_factory","core/modal_events"],function(a,b,c){return{init:function(){window.onbeforeunload=null;var d=a("#select_course_filter_draft").val();a("#select_course_filter_draft").change(function(a){a.preventDefault(),d!==this.value&&(window.location.href="drafts.php?courseid="+this.value)}),a(document).click(function(b){a(b.target).hasClass("btn-delete-draft")?deleteDraftId=a(b.target).attr("data-draft-id"):a(b.target).hasClass("btn-duplicate-draft")&&(duplicateDraftId=a(b.target).attr("data-draft-id"))});var e=a(".btn-delete-draft");b.create({type:b.types.CONFIRM,title:"Delete Message Draft",body:"<p>This will permanently delete your draft message, are you sure?</p>"},e).done(function(b){b.getRoot().on(c.yes,function(b){b.preventDefault(),a('input[name="delete_draft_id"]').val(deleteDraftId),a("#mform-manage-drafts").submit()})});var f=a(".btn-duplicate-draft");b.create({type:b.types.CONFIRM,title:"Duplicate Message Draft",body:"<p>This will make a copy of the draft, are you sure?</p>"},f).done(function(b){b.getRoot().on(c.yes,function(b){b.preventDefault(),a('input[name="duplicate_draft_id"]').val(duplicateDraftId),a("#mform-manage-drafts").submit()})})}}});